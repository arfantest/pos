<div class="account-form-container">
  <nz-breadcrumb>
    <nz-breadcrumb-item>
      <i nz-icon nzType="home"></i>
    </nz-breadcrumb-item>
    <nz-breadcrumb-item>
      <a routerLink="/accounts">Accounts</a>
    </nz-breadcrumb-item>
    <nz-breadcrumb-item>{{ isEditMode ? 'Edit Account' : 'New Account' }}</nz-breadcrumb-item>
  </nz-breadcrumb>

  <div class="page-header">
    <h2>{{ isEditMode ? 'Edit Account' : 'Create New Account' }}</h2>
  </div>

  <nz-card [nzLoading]="loading">
    <form nz-form [formGroup]="accountForm" (ngSubmit)="onSubmit()">
      <div nz-row [nzGutter]="16">
        <div nz-col nzXs="24" nzSm="12">
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="code">Account Code</nz-form-label>
            <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Please enter a valid account code (uppercase letters and numbers only)">
              <input nz-input formControlName="code" id="code" placeholder="e.g., 1000, CASH, ACC001" />
            </nz-form-control>
          </nz-form-item>
        </div>
        
        <div nz-col nzXs="24" nzSm="12">
          <nz-form-item>
            <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired nzFor="name">Account Name</nz-form-label>
            <nz-form-control [nzSm]="18" [nzXs]="24" nzErrorTip="Please enter account name (minimum 2 characters)">
              <input nz-input formControlName="name" id="name" placeholder="e.g., Cash on Hand" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <nz-form-item>
        <nz-form-label [nzSm]="3" [nzXs]="24" nzRequired nzFor="type">Account Type</nz-form-label>
        <nz-form-control [nzSm]="21" [nzXs]="24" nzErrorTip="Please select account type">
          <nz-select formControlName="type" id="type" nzPlaceHolder="Select account type">
            <nz-option *ngFor="let type of accountTypes" [nzLabel]="type.label" [nzValue]="type.value">
            </nz-option>
          </nz-select>
          <!-- <nz-form-explain *ngIf="accountForm.get('type')?.value">
            {{ accountTypes.find(t => t.value === accountForm.get('type')?.value)?.description }}
          </nz-form-explain> -->
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSm]="3" [nzXs]="24" nzFor="description">Description</nz-form-label>
        <nz-form-control [nzSm]="21" [nzXs]="24">
          <textarea nz-input formControlName="description" id="description" 
                    placeholder="Additional details about this account" row="3"></textarea>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-control [nzSm]="{ span: 21, offset: 3 }" [nzXs]="{ span: 24, offset: 0 }">
          <button nz-button nzType="default" (click)="onCancel()" [disabled]="submitting">
            Cancel
          </button>
          <button nz-button nzType="primary" [nzLoading]="submitting" [disabled]="!accountForm.valid" 
                  style="margin-left: 8px;">
            {{ isEditMode ? 'Update Account' : 'Create Account' }}
          </button>
        </nz-form-control>
      </nz-form-item>
    </form>
  </nz-card>
</div>
