<!-- Breadcrumb -->
<nz-breadcrumb class="mb-6 text-sm">
  <nz-breadcrumb-item>
    <a routerLink="/" class="text-blue-600 hover:text-blue-800 transition-colors">
      <span nz-icon nzType="home" nzTheme="outline" class="align-middle"></span>
    </a>
  </nz-breadcrumb-item>
  <nz-breadcrumb-item>
    <a routerLink="/accounts" class="text-blue-600 hover:text-blue-800 transition-colors">Accounts</a>
  </nz-breadcrumb-item>
  <nz-breadcrumb-item class="text-gray-700 font-medium">
    {{ isEditMode ? 'Edit Account' : 'Create Account' }}
  </nz-breadcrumb-item>
</nz-breadcrumb>

<!-- Page Header -->
<div class="mb-4">
  <h2 class="text-xl font-semibold text-gray-800">
    {{ isEditMode ? 'Update Account' : 'New Account' }}
  </h2>
  <p class="text-gray-500 mt-1">
    {{ isEditMode ? 'Update existing account details' : 'Add a new account to your chart of accounts' }}
  </p>
</div>

<!-- Form Card -->
<nz-card [nzLoading]="loading" class="shadow-lg rounded-xl border border-gray-200 bg-white p-4">
  <form nz-form [formGroup]="accountForm" (ngSubmit)="onSubmit()" class="space-y-4">

    <!-- Row 1: Account Code & Name -->
    <div nz-row [nzGutter]="16">
      <div nz-col nzSpan="12">
        <div class="space-y-1">
          <label class="block text-sm font-medium text-gray-700">
            Account Code <span class="text-red-500">*</span>
          </label>
          <input nz-input formControlName="code" id="code"
            class="w-full h-9 px-3 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"
            placeholder="E.g. 1000, CASH" />
        </div>
      </div>
      
      <div nz-col nzSpan="12">
        <div class="space-y-1">
          <label class="block text-sm font-medium text-gray-700">
            Account Name <span class="text-red-500">*</span>
          </label>
          <input nz-input formControlName="name" id="name"
            class="w-full h-9 px-3 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"
            placeholder="E.g. Cash on Hand" />
        </div>
      </div>
    </div>

    <!-- Row 2: Account Type, Balance & Status -->
    <div nz-row [nzGutter]="16">
      <div nz-col nzSpan="8">
        <div class="space-y-1">
          <label class="block text-sm font-medium text-gray-700">
            Account Type <span class="text-red-500">*</span>
          </label>
          <nz-select formControlName="type" id="type" nzPlaceHolder="Select type" nzShowSearch nzAllowClear
            class="w-full h-9">
            <nz-option *ngFor="let type of accountTypes" [nzLabel]="type.label" [nzValue]="type.value"
              [nzCustomContent]="true">
              <div class="py-1 px-2">
                <div class="font-medium text-gray-800 text-sm">{{ type.label }}</div>
                <div class="text-xs text-gray-500">{{ type.description }}</div>
              </div>
            </nz-option>
          </nz-select>
        </div>
      </div>

      <div nz-col nzSpan="8">
        <div class="space-y-1">
          <label class="block text-sm font-medium text-gray-700">
            Opening Balance <span class="text-red-500">*</span>
          </label>
          <nz-input-number formControlName="balance" id="balance" [nzMin]="0" [nzStep]="0.01" [nzPrecision]="2"
            class="w-full h-9" nzPlaceHolder="0.00">
          </nz-input-number>
        </div>
      </div>

      <div nz-col nzSpan="8">
        <div class="space-y-1">
          <label class="block text-sm font-medium text-gray-700">Status</label>
          <div class="flex items-center h-9">
            <nz-switch formControlName="isActive" [nzCheckedChildren]="'Active'" [nzUnCheckedChildren]="'Inactive'">
            </nz-switch>
            <span class="text-xs text-gray-500 ml-2">
              {{ accountForm.get('isActive')?.value ? 'Active' : 'Inactive' }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Type Description (Full Width) -->
    <div *ngIf="accountForm.get('type')?.value"
      class="p-3 bg-blue-50 border border-blue-100 rounded text-blue-800 text-xs">
      <div class="font-medium mb-1">About this account type:</div>
      {{ getSelectedTypeDescription() }}
    </div>

    <!-- Description (Full Width) -->
    <div class="space-y-1">
      <label class="block text-sm font-medium text-gray-700">Description</label>
      <textarea nz-input formControlName="description" id="description"
        class="w-full px-3 py-2 rounded border border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm resize-none"
        placeholder="Additional details about this account" rows="2">
      </textarea>
    </div>

    <div class="border-t border-gray-200 my-4"></div>

    <!-- Actions -->
    <div class="flex justify-end gap-2 pt-2">
      <button nz-button nzType="default" (click)="onCancel()" [disabled]="submitting" class="min-w-[90px] h-8 px-4 border border-gray-300 rounded text-gray-700 text-sm
               hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-gray-300">
        Cancel
      </button>

      <button nz-button nzType="primary" [nzLoading]="submitting" [disabled]="!accountForm.valid" class="min-w-[120px] h-8 px-4 bg-blue-600 text-white rounded text-sm
               hover:bg-blue-700 focus:outline-none focus:ring-1 focus:ring-blue-500">
        {{ isEditMode ? 'Update Account' : 'Create Account' }}
      </button>
    </div>

  </form>
</nz-card>